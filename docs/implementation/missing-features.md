# XS言語の不足機能リスト

React風UIライブラリの実装を通じて発見した、実用言語として不足している機能のリストです。

## 1. 基本的な言語機能

### 1.1 文字列操作
- **文字列連結関数** (`str-concat`, `str-append`)
- **文字列から数値への変換** (`string-to-int`, `string-to-float`)
- **数値から文字列への変換** (`int-to-string`, `float-to-string`)
- **文字列の長さ取得** (`string-length`)
- **部分文字列の取得** (`substring`)
- **文字列の分割** (`string-split`)

### 1.2 Unit型とEffect System
- **Unit型** - 副作用を表現するための基本型
- **IO型** - 入出力操作のための型
- **Effect System** - 副作用の追跡と管理

### 1.3 レコード型
- **レコード型の定義** - 名前付きフィールドを持つ構造体
- **レコードの更新構文** - イミュータブルな更新
- **レコードのパターンマッチング**

## 2. 高度な型システム機能

### 2.1 型クラス
- **型クラスの定義と実装**
- **Show型クラス** - 任意の型を文字列に変換
- **Eq型クラス** - 等価性の比較
- **Ord型クラス** - 順序比較

### 2.2 ジェネリクス改善
- **高階型パラメータ** (Higher-Kinded Types)
- **型制約** (Type Constraints)

## 3. モジュールシステムの改善

### 3.1 循環参照の解決
- 現在、モジュール間の循環参照ができない
- 前方宣言やインターフェースの分離が必要

### 3.2 名前空間の改善
- ネストされたモジュール
- 選択的なエクスポート/インポート

## 4. 実用的な標準ライブラリ

### 4.1 コレクション
- **Map/Dictionary型** - キー・バリューのペア
- **Set型** - 重複のないコレクション
- **Array型** - 固定長配列（パフォーマンス向上のため）

### 4.2 非同期処理
- **Promise/Future型**
- **async/await構文**
- **並行処理プリミティブ**

## 5. 開発者体験の向上

### 5.1 エラーメッセージ
- より詳細な型エラーの説明
- 修正提案の改善
- スタックトレース情報

### 5.2 デバッグサポート
- **trace関数** - デバッグ出力
- **assert関数** - 前提条件のチェック
- **breakpoint** - デバッガーサポート

## 6. パフォーマンス最適化

### 6.1 メモリ管理
- **参照カウントの最適化**
- **インライン化ヒント**
- **末尾再帰の保証**

### 6.2 コンパイル時計算
- **コンパイル時定数**
- **マクロシステム**

## 実装優先度

### 高優先度（UIライブラリに必須）
1. 文字列操作関数
2. Unit型とEffect System
3. レコード型
4. Map/Dictionary型

### 中優先度（生産性向上）
1. 型クラス（特にShow）
2. エラーメッセージの改善
3. デバッグサポート

### 低優先度（将来の拡張）
1. 非同期処理
2. 高階型パラメータ
3. マクロシステム

## 次のステップ

これらの機能を段階的に実装することで、XS言語をより実用的な言語に発展させることができます。特に、UIライブラリの実装には文字列操作とEffect Systemが必須であることがわかりました。